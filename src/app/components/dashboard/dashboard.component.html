<div class="dashboard-container">
    <div class="row">
        <div class="col-12">
            <h1 class="welcome-header">
                Welcome, {{ currentUser?.firstName }} {{ currentUser?.lastName }}!
            </h1>
            <p class="role-text">
                Your role: <strong>{{ currentUser?.role | titlecase }}</strong>
            </p>
            <hr>
        </div>
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
        {{ errorMessage }}
    </div>

    <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <p class="mt-2">Loading dashboard statistics...</p>
    </div>

    <ng-container *ngIf="!loading && (currentUser?.role === 'admin' || currentUser?.role === 'teacher')">
        <h2 class="section-header">System Overview</h2>

        <div class="row stats-row">

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card card text-white bg-info">
                    <div class="card-body">
                        <div class="stat-value">{{ stats.totalClasses | number }}</div>
                        <div class="stat-label">Total Classes</div>
                        <i class="stat-icon fas fa-chalkboard-teacher"></i>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card card text-white bg-success">
                    <div class="card-body">
                        <div class="stat-value">{{ stats.totalStudents | number }}</div>
                        <div class="stat-label">Total Students</div>
                        <i class="stat-icon fas fa-user-graduate"></i>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card card text-white bg-warning">
                    <div class="card-body">
                        <div class="stat-value">{{ stats.activeEnrollments | number }}</div>
                        <div class="stat-label">Active Enrollments</div>
                        <i class="stat-icon fas fa-users"></i>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card card text-white bg-danger">
                    <div class="card-body">
                        <div class="stat-value">{{ stats.totalSchedules | number }}</div>
                        <div class="stat-label">Total Schedules</div>
                        <i class="stat-icon fas fa-calendar-alt"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <h3 class="section-header">Quick Actions</h3>
                <p>Use the navigation bar to manage Users, Classes, and Schedules.</p>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="!loading && currentUser?.role === 'student'">
        <div class="alert alert-info" role="alert">
            Welcome to the Student Dashboard! Your enrolled classes and schedule information will appear here shortly.
        </div>
    </ng-container>
</div>
