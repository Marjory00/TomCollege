
<div class="container mt-4">
    <div class="card shadow">
        <div class="card-header bg-success text-white">
            <h1 class="h4 mb-0">
                <i class="fas fa-chalkboard-teacher me-2"></i>
                @if (isEditMode) {
                    Edit Teacher Details
                } @else {
                    Register New Teacher
                }
            </h1>
        </div>
        <div class="card-body">

            @if (loading) {
                <div class="text-center py-5">
                    <div class="spinner-border text-success" role="status"></div>
                    <p class="mt-2">Loading teacher data...</p>
                </div>
            }

            @if (errorMessage && !loading) {
                <div class="alert alert-danger" role="alert">
                    {{ errorMessage }}
                </div>
            }

            @if (!loading) {
                <form [formGroup]="teacherForm" (ngSubmit)="onSubmit()">

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="firstName" class="form-label">First Name</label>
                            <input type="text" id="firstName" formControlName="firstName" class="form-control"
                                [class.is-invalid]="teacherForm.get('firstName')?.invalid && teacherForm.get('firstName')?.touched">
                            @if (teacherForm.get('firstName')?.hasError('required') && teacherForm.get('firstName')?.touched) {
                                <div class="invalid-feedback">First Name is required.</div>
                            }
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="lastName" class="form-label">Last Name</label>
                            <input type="text" id="lastName" formControlName="lastName" class="form-control"
                                [class.is-invalid]="teacherForm.get('lastName')?.invalid && teacherForm.get('lastName')?.touched">
                            @if (teacherForm.get('lastName')?.hasError('required') && teacherForm.get('lastName')?.touched) {
                                <div class="invalid-feedback">Last Name is required.</div>
                            }
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email Address</label>
                        <input type="email" id="email" formControlName="email" class="form-control"
                            [class.is-invalid]="teacherForm.get('email')?.invalid && teacherForm.get('email')?.touched">
                        @if (teacherForm.get('email')?.hasError('required') && teacherForm.get('email')?.touched) {
                            <div class="invalid-feedback">Email is required.</div>
                        } @else if (teacherForm.get('email')?.hasError('email') && teacherForm.get('email')?.touched) {
                            <div class="invalid-feedback">Please enter a valid email format.</div>
                        }
                    </div>

                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="department" class="form-label">Department</label>
                            <select id="department" formControlName="department" class="form-select"
                                [class.is-invalid]="teacherForm.get('department')?.invalid && teacherForm.get('department')?.touched">
                                <option value="" disabled>Select Department</option>
                                @for (dept of departments; track dept) {
                                    <option [value]="dept">{{ dept }}</option>
                                }
                            </select>
                            @if (teacherForm.get('department')?.hasError('required') && teacherForm.get('department')?.touched) {
                                <div class="invalid-feedback">Department is required.</div>
                            }
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="hireDate" class="form-label">Hire Date</label>
                            <input type="date" id="hireDate" formControlName="hireDate" class="form-control"
                                [class.is-invalid]="teacherForm.get('hireDate')?.invalid && teacherForm.get('hireDate')?.touched">
                            @if (teacherForm.get('hireDate')?.hasError('required') && teacherForm.get('hireDate')?.touched) {
                                <div class="invalid-feedback">Hire Date is required.</div>
                            }
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="status" class="form-label">Employment Status</label>
                            <select id="status" formControlName="status" class="form-select"
                                [class.is-invalid]="teacherForm.get('status')?.invalid && teacherForm.get('status')?.touched">
                                @for (stat of statuses; track stat) {
                                    <option [value]="stat">{{ stat }}</option>
                                }
                            </select>
                            @if (teacherForm.get('status')?.hasError('required') && teacherForm.get('status')?.touched) {
                                <div class="invalid-feedback">Status is required.</div>
                            }
                        </div>
                    </div>

                    <div class="d-flex justify-content-end pt-3 border-top">
                        <button type="button" class="btn btn-secondary me-2" (click)="cancel()">
                            <i class="fas fa-times me-2"></i>Cancel
                        </button>
                        <button type="submit" class="btn btn-success" [disabled]="submitting || teacherForm.invalid">
                            @if (submitting) {
                                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                                Saving...
                            } @else {
                                <i class="fas fa-save me-2"></i>
                                {{ isEditMode ? 'Update Teacher' : 'Register Teacher' }}
                            }
                        </button>
                    </div>

                </form>
            }
        </div>
    </div>
</div>
